[{"id":"bcf33378.a06a7","type":"dgstart","name":"DGSTART","outputs":1,"x":115,"y":60.33333778381348,"z":"9adc6d3f.4fd9a","wires":[["9aecacf7.59d93"]]},{"id":"9aecacf7.59d93","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":298,"y":61.33333778381348,"z":"9adc6d3f.4fd9a","wires":[["d767a7f1.e85ab8"]]},{"id":"d767a7f1.e85ab8","type":"method","name":"method Generic_Configure","xml":"<method rpc='Generic_Configure' mode='sync'>\n","comments":"","outputs":1,"x":513,"y":53.33333778381348,"z":"9adc6d3f.4fd9a","wires":[["9648a68e.58be58"]]},{"id":"9648a68e.58be58","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":132,"y":196.66666316986084,"z":"9adc6d3f.4fd9a","wires":[["b08a9e58.bd07e","ecefd839.64cd58","bbe79244.e2541","7421ecb2.1ac094"]]},{"id":"b08a9e58.bd07e","type":"call","name":"call: DownloadConfig","xml":"<call module=\"APPC\" rpc=\"`$tmp.configureactiondg.DOWNLOAD-CONFIG-DG`\" mode=\"sync\">","comments":"","outputs":1,"x":398.4444351196289,"y":472.77783012390137,"z":"9adc6d3f.4fd9a","wires":[["ef940996.264278","b02b2cdd.876c9","9cdecbc8.ba74f8"]]},{"id":"ef940996.264278","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":623.6666374206543,"y":409.4444389343262,"z":"9adc6d3f.4fd9a","wires":[["41480864.94a478"]]},{"id":"b02b2cdd.876c9","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":644.9166984558105,"y":576.8334465026855,"z":"9adc6d3f.4fd9a","wires":[["cc065ab0.bbd438"]]},{"id":"9cdecbc8.ba74f8","type":"success","name":" success","xml":"<outcome value=\"success\">","comments":"","outputs":1,"x":593.2500114440918,"y":769.1667022705078,"z":"9adc6d3f.4fd9a","wires":[["2e4169d0.23efc6"]]},{"id":"41480864.94a478","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":832.3333053588867,"y":403.66669845581055,"z":"9adc6d3f.4fd9a","wires":[["10597d65.368c33","c9fe6ef2.b8991","ee63b08a.143ca"]]},{"id":"cc065ab0.bbd438","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":827.8333282470703,"y":622.000072479248,"z":"9adc6d3f.4fd9a","wires":[["b2cd609c.f0e14"]]},{"id":"2e4169d0.23efc6","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":799.2500114440918,"y":760.4167022705078,"z":"9adc6d3f.4fd9a","wires":[["4351ab2.e80d754","5155e2e.c35c01c","ac964ccc.c134e","de42b2.dca01d5"]]},{"id":"10597d65.368c33","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'error-code = ' + $error-code`\" />\n<parameter name=\"field3\" value=\"`'error-message = ' + $error-message`\" />\n","comments":"","outputs":1,"x":1095.2222938537598,"y":385.888879776001,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"b2cd609c.f0e14","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`'DG Workflow ' + $tmp.configureactiondg.DOWNLOAD-CONFIG-DG + ' not found'`\"/>\n\t","comments":"","x":1231.2500228881836,"y":646.7500114440918,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"4351ab2.e80d754","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'error-code = ' + $error-code`\" />\n<parameter name=\"field3\" value=\"`'error-message = ' + $error-message`\" />\n<parameter name=\"field4\" value=\"ACTIVATESUCCESS\" />","comments":"","outputs":1,"x":1089.750015258789,"y":756.1666979789734,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"c9fe6ef2.b8991","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t","comments":"","x":1111.777847290039,"y":549.4444303512573,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"ecefd839.64cd58","type":"set","name":"set Download params","xml":"<set>\n<parameter name='host-ip-address' value='`$vnf-host-ip-address`' />\n<parameter name='device-login' value='`$device-authentication.USER-NAME`' />\n<parameter name='device-password' value='`$device-authentication.PASSWORD`' />\n<parameter name='port-number' value='`$device-authentication.PORT-NUMBER`' />\n<parameter name='protocol' value='`$tmp.deviceinterfaceprotocol.PROTOCOL`' />\n<parameter name='device-config' value='`$deviceconfig-file-content`' />","comments":"","x":448.8888473510742,"y":350.4444570541382,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"5155e2e.c35c01c","type":"set","name":"set error-code 400 and message","xml":"<set>\n<parameter name='error-code' value='400' />\n<parameter name=\"error-message\" value=\"SUCCESS - request has been processed successfully\" />\n","comments":"","x":1107.583267211914,"y":707.3333854675293,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"a4b7d4d9.d03ab8","type":"comment","name":"ConfigCompAdaptor resets error code for success cases","info":"","comments":"","x":1461.7500305175781,"y":704.3333892822266,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"bbe79244.e2541","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"log\" />\n<parameter name=\"message\" value=\"get Config Info\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":449.55554962158203,"y":269.11108779907227,"z":"9adc6d3f.4fd9a","wires":[["d1d61570.0be3f8"]]},{"id":"ac964ccc.c134e","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"log\" />\n<parameter name=\"message\" value=\"400: Download of Config file is Successful\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":1090.000015258789,"y":827.7500171661377,"z":"9adc6d3f.4fd9a","wires":[["93a11316.da719"]]},{"id":"5268669e.4e3c78","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.openecomp.appc.config.generator.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"log\" />\n<parameter name=\"message\" value=\"`$tmp.message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":1887.8889350891113,"y":551.5555553436279,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"77bc4fc2.cc583","type":"set","name":"set tmp.message","xml":"<set>\n<parameter name='tmp.message' value=\"`'Download Failure : ' + $error-code + ' : ' + $error-message`\" />\n","comments":"","x":1889.1110229492188,"y":477.8888874053955,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"ee63b08a.143ca","type":"switchNode","name":"switch: error-code","xml":"<switch test=\"`$error-code`\">\n","comments":"","outputs":1,"x":1120.9999084472656,"y":456.9999694824219,"z":"9adc6d3f.4fd9a","wires":[["b1c4ad91.8aa34","8d980f69.01da2"]]},{"id":"b1c4ad91.8aa34","type":"success","name":"outcome: 400","xml":"<outcome value=\"400\">","comments":"","outputs":1,"x":1316.6666946411133,"y":399.6666660308838,"z":"9adc6d3f.4fd9a","wires":[["8b8d3a30.692328"]]},{"id":"8b8d3a30.692328","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1551.6666717529297,"y":397.22224521636963,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"8d980f69.01da2","type":"success","name":"outcome: Other","xml":"<outcome value=\"Other\">","comments":"","outputs":1,"x":1327.6666259765625,"y":482.444429397583,"z":"9adc6d3f.4fd9a","wires":[["4cb182b1.06d15c"]]},{"id":"4cb182b1.06d15c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1551.1110382080078,"y":484.55556869506836,"z":"9adc6d3f.4fd9a","wires":[["77bc4fc2.cc583","5268669e.4e3c78"]]},{"id":"7625e08d.e0025","type":"comment","name":"ISBC cases returns failure to stop polling","info":"","comments":"","x":1601.6665344238281,"y":297.88886165618896,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"93a11316.da719","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1285.916648864746,"y":823.3333911895752,"z":"9adc6d3f.4fd9a","wires":[["b3148632.6019e8"]]},{"id":"b3148632.6019e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1459.5000267028809,"y":824.8333911895752,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"d1d61570.0be3f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":648.6666641235352,"y":269.99997329711914,"z":"9adc6d3f.4fd9a","wires":[["8e0a1916.289ea8"]]},{"id":"8e0a1916.289ea8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":866.8889312744141,"y":272.888897895813,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"de42b2.dca01d5","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1055.000015258789,"y":901.9998970031738,"z":"9adc6d3f.4fd9a","wires":[["547a0900.632ad8","cfef6f4a.c8106"]]},{"id":"cfef6f4a.c8106","type":"call","name":"call: SaveRunningConfig","xml":"<call module=\"APPC\" rpc=\"SaveRunningConfig\" mode=\"sync\">","comments":"","outputs":1,"x":1314.750015258789,"y":900.833270072937,"z":"9adc6d3f.4fd9a","wires":[["bfd5ce67.f2b84"]]},{"id":"547a0900.632ad8","type":"switchNode","name":"switch: request-action","xml":"<switch test=\"`$request-action`\">\n","comments":"","outputs":1,"x":1269.4998970031738,"y":992.4998931884766,"z":"9adc6d3f.4fd9a","wires":[["9e0e7bc6.f3ad08","2bc0abbb.b9c904"]]},{"id":"9e0e7bc6.f3ad08","type":"other","name":"Configure","xml":"<outcome value='Configure'>","comments":"","outputs":1,"x":1516.749900817871,"y":982.4165191650391,"z":"9adc6d3f.4fd9a","wires":[["43f68adb.c89264"]]},{"id":"2bc0abbb.b9c904","type":"other","name":"ConfigScale","xml":"<outcome value='ConfigScale'>","comments":"","outputs":1,"x":1521.5000228881836,"y":1049.4998941421509,"z":"9adc6d3f.4fd9a","wires":[["43f68adb.c89264"]]},{"id":"43f68adb.c89264","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1798.9165344238281,"y":1029.5832738876343,"z":"9adc6d3f.4fd9a","wires":[["65936072.2b5fa"]]},{"id":"65936072.2b5fa","type":"call","name":"call: UpdateAaiInfo","xml":"<call module=\"APPC\" rpc=\"UpdateAaiInfo\" mode=\"sync\">","comments":"","outputs":1,"x":820.3334465026855,"y":1139.9166431427002,"z":"9adc6d3f.4fd9a","wires":[["9151a526.f94b68"]]},{"id":"9151a526.f94b68","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1027.9167556762695,"y":1144.1666440963745,"z":"9adc6d3f.4fd9a","wires":[["1879d6b6.911e99"]]},{"id":"1879d6b6.911e99","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1222.083267211914,"y":1145.7498989105225,"z":"9adc6d3f.4fd9a","wires":[["e81a1fc0.a272c","f0dd7641.253498"]]},{"id":"e81a1fc0.a272c","type":"set","name":"set:  dcae-error message","xml":"<set>\n\t  <parameter name=\"dcae-error-message\" value=\"DG Workflow UpdateAaiInfo not found\"/>\n\t  ","comments":"","x":1529.2500228881836,"y":1120.3332686424255,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"f0dd7641.253498","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"DCAEERRORMESSAGE\" value=\"`$dcae-error-message`\"/>\n","comments":"","outputs":1,"x":1472.1666526794434,"y":1166.5832710266113,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"6518f897.340dd8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":1721.0832748413086,"y":900.9998979568481,"z":"9adc6d3f.4fd9a","wires":[["186de19c.bcf0ae","407c43d8.cfa8ac"]]},{"id":"bfd5ce67.f2b84","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1528.5832748413086,"y":900.7498979568481,"z":"9adc6d3f.4fd9a","wires":[["6518f897.340dd8"]]},{"id":"186de19c.bcf0ae","type":"set","name":"set:  dcae-error message","xml":"<set>\n\t  <parameter name=\"dcae-error-message\" value=\"DG Workflow SaveRunningConfig not found\"/>\n\t ","comments":"","x":2030.0000305175781,"y":903.2498960494995,"z":"9adc6d3f.4fd9a","wires":[]},{"id":"407c43d8.cfa8ac","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"DCAEERRORMESSAGE\" value=\"`$dcae-error-message`\"/>\n","comments":"","outputs":1,"x":1974.4999084472656,"y":958.0832719802856,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"7421ecb2.1ac094","type":"execute","name":"execute getCommonConfigInfo","xml":"<execute plugin=\"org.openecomp.appc.data.services.node.ConfigResourceNode\" method=\"getCommonConfigInfo\">\n<parameter name=\"responsePrefix\" value=\"tmp.commonConfigInfo\" />\n","comments":"","outputs":1,"x":517.7777709960938,"y":156.66665649414062,"z":"9adc6d3f.4fd9a","wires":[["b891a8f2.0b2ce8","686bbe23.d037e"]]},{"id":"b891a8f2.0b2ce8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":785.7778053283691,"y":162.9999771118164,"z":"9adc6d3f.4fd9a","wires":[["17029b5a.574655"]]},{"id":"17029b5a.574655","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":948.7778053283691,"y":166.9999771118164,"z":"9adc6d3f.4fd9a","wires":[["8d2d875d.8b0af8"]]},{"id":"8d2d875d.8b0af8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`$request-action`\"/>\n<parameter name=\"field3\" value=\"`$input.action`\"/>\n\n","comments":"","outputs":1,"x":1116.7778053283691,"y":165.9999771118164,"z":"9adc6d3f.4fd9a","wires":[[]]},{"id":"686bbe23.d037e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":779.7777786254883,"y":237.99999237060547,"z":"9adc6d3f.4fd9a","wires":[["7cedc144.223ff"]]},{"id":"7cedc144.223ff","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":957.1110610961914,"y":238.33336639404297,"z":"9adc6d3f.4fd9a","wires":[["1ab7b9f2.f91326"]]},{"id":"1ab7b9f2.f91326","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"DG Workflow GetAaiInfo not found\"/>\n\t","comments":"","x":1144.7777099609375,"y":236.33328437805176,"z":"9adc6d3f.4fd9a","wires":[]}]
