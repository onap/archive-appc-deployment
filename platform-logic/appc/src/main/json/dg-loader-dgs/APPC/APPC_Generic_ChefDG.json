[{"id":"545e04ed.181234","type":"dgstart","name":"DGSTART","outputs":1,"x":287,"y":237,"z":"68fff755.a3d4d8","wires":[["a62bd6e0.096bd"]]},{"id":"a62bd6e0.096bd","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":491.6875,"y":226.0625,"z":"68fff755.a3d4d8","wires":[["259194f2.96ff6c"]]},{"id":"259194f2.96ff6c","type":"method","name":"method Generic_AnsibleDG","xml":"<method rpc='Generic_ChefDG' mode='sync'>\n","comments":"","outputs":1,"x":743.25,"y":226.0625,"z":"68fff755.a3d4d8","wires":[["98cbebaf.59b978"]]},{"id":"50578aed.59d2e4","type":"call","name":"call:chef","xml":"<call module=\"APPC\" rpc=\"chef\" mode=\"sync\">","comments":"","outputs":1,"x":498.8544616699219,"y":950.8247985839844,"z":"68fff755.a3d4d8","wires":[["cca3d157.3b8d9","f54a112b.e09388"]]},{"id":"b4ccce5b.25a54","type":"execute","name":"execute getDecrytedpassword","xml":" <execute plugin='org.onap.appc.encryptiontool.wrapper.EncryptionToolDGWrapper' method = 'getProperty'>\n   <parameter name='propertyName' value=\"`$tmp.prefix+'.'+$password`\"/>\n  <parameter name='responsePrefix' value =\"prefix\"/>","comments":"","outputs":1,"x":774.0205993652344,"y":581.4720458984375,"z":"68fff755.a3d4d8","wires":[["1ad509ac.6bde56","397377f2.2fc3b"]]},{"id":"d6fa1f8e.f2501","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value=\"Unable to decrypt the password.\" />\n","comments":"","x":1438.041763305664,"y":793.9915771484375,"z":"68fff755.a3d4d8","wires":[]},{"id":"46252d4b.e7dacc","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1269.3124160766602,"y":794.1707782745361,"z":"68fff755.a3d4d8","wires":[["d6fa1f8e.f2501"]]},{"id":"397377f2.2fc3b","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1071.2499694824219,"y":791.7915954589844,"z":"68fff755.a3d4d8","wires":[["46252d4b.e7dacc"]]},{"id":"1ad509ac.6bde56","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1052.2626647949219,"y":725.6457824707031,"z":"68fff755.a3d4d8","wires":[["46252d4b.e7dacc"]]},{"id":"198ce026.c13188","type":"execute","name":"execute Convert payload to DG Context ","xml":"<execute plugin=\"org.openecomp.sdnc.config.generator.convert.ConvertNode\" method=\"convertJson2DGContext\">\n<parameter name=\"jsonData\" value=\"`$tmp.merge.mergedData`\" />\n<parameter name=\"isEscaped\" value=\"Y\" />\n<parameter name=\"blockKeys\" value=\"chef-server-address,chef-organization,chef-username,Node,NodeList,retryTimes,retryInterval,GetOutputFlag,PushJobFlag\" />\n<parameter name=\"responsePrefix\" value=\"tmp.convertnode\" />","comments":"","outputs":1,"x":851.8367538452148,"y":345.05355072021484,"z":"68fff755.a3d4d8","wires":[["cf425802.a48338","5a1e43db.08bb24"]]},{"id":"5a1e43db.08bb24","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1071.074951171875,"y":540.7083435058594,"z":"68fff755.a3d4d8","wires":[["27290e05.4a4002"]]},{"id":"cf425802.a48338","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1067.9082946777344,"y":627.9916753768921,"z":"68fff755.a3d4d8","wires":[["5ce0dfaf.34fb"]]},{"id":"27290e05.4a4002","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1237.74169921875,"y":543.875,"z":"68fff755.a3d4d8","wires":[["434c1e87.e2ea78"]]},{"id":"5ce0dfaf.34fb","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1244.0748672485352,"y":607.3582935333252,"z":"68fff755.a3d4d8","wires":[["2aaefdf8.b727ba"]]},{"id":"2aaefdf8.b727ba","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to process convert payload to context.\"/>\n\t\n","comments":"","x":1447.27486038208,"y":610.5416812896729,"z":"68fff755.a3d4d8","wires":[]},{"id":"98cbebaf.59b978","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":539.3415985107422,"y":338.6416015625,"z":"68fff755.a3d4d8","wires":[["198ce026.c13188","b4ccce5b.25a54","50578aed.59d2e4","82d5bd4e.2c94c8","33125b1.c4e57a4","e26c3001.6fd098","c887d74a.9f71","bfab8738.483068","5cd2bf9c.adbe38"]]},{"id":"434c1e87.e2ea78","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.convertnode.error-message`\"/>\n\t\n\t","comments":"","x":1466.3082275390625,"y":546.2749633789062,"z":"68fff755.a3d4d8","wires":[]},{"id":"50834eee.47b698","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t","comments":"","x":1267.9083251953125,"y":982.7916259765625,"z":"68fff755.a3d4d8","wires":[]},{"id":"cca3d157.3b8d9","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1005.9915771484375,"y":927.2250366210938,"z":"68fff755.a3d4d8","wires":[["50834eee.47b698"]]},{"id":"f54a112b.e09388","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":982.191650390625,"y":1009.7749633789062,"z":"68fff755.a3d4d8","wires":[["50834eee.47b698"]]},{"id":"82d5bd4e.2c94c8","type":"set","name":"set tmp.prefix","xml":"<set>\n<parameter name=\"tmp.prefix\" value=\"`$vnf-type + '.' + $input.action`\"/>\n<parameter name=\"password\" value=\"password\"/>\n<parameter name=\"user\" value=\"user\"/>\n\n","comments":"","x":845.8448791503906,"y":434.2883605957031,"z":"68fff755.a3d4d8","wires":[]},{"id":"33125b1.c4e57a4","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`$input.action`\"/>\n<parameter name=\"field3\" value =\"`$tmp.merge.mergedData`\"/>\n<parameter name=\"field4\" value =\"`$tmp.merge`\"/>","comments":"","outputs":1,"x":939.9450073242188,"y":271.79498291015625,"z":"68fff755.a3d4d8","wires":[[]]},{"id":"e26c3001.6fd098","type":"execute","name":"execute getUser","xml":" <execute plugin='org.onap.appc.encryptiontool.wrapper.EncryptionToolDGWrapper' method = 'getProperty'>\n  <parameter name='responsePrefix' value =\"prefix\"/>\n  <parameter name='propertyName' value=\"`$tmp.prefix+'.'+$user`\"/>","comments":"","outputs":1,"x":668.6667785644531,"y":719.6667175292969,"z":"68fff755.a3d4d8","wires":[[]]},{"id":"c887d74a.9f71","type":"set","name":"set password","xml":"<set>\n<parameter name=\"tmp.prefix\" value=\"`$vnf-type + '.' + $input.action`\"/>\n<parameter name=\"password\" value=\"$propertyName\"/>\n\n\n","comments":"","x":756.9998474121094,"y":658.6666564941406,"z":"68fff755.a3d4d8","wires":[]},{"id":"bfab8738.483068","type":"set","name":"set Payload params ","xml":"<set>\n<parameter name='Node' value='`$block_Node`' />\n<parameter name='NodeList' value ='`$block_NodeList`'/>\n<parameter name='vnf_id' value='`$vnf-id`' />\n<parameter name='chef-server-address' value='`$vnf-host-ip-address`'/>\n<parameter name='chef-organization' value='`$block_chef-organization`'/>\n<parameter name='retryTimes' value='`$block_retryTimes`'/>\n<parameter name='retryInterval' value='`$block_retryInterval`'/>\n<parameter name='GetOutputFlag' value='`$block_GetOutputFlag`'/>\n<parameter name='PushJobFlag' value='`$block_PushJobFlag`'/>\n\n\n\n","comments":"","x":853.6666564941406,"y":391.66668701171875,"z":"68fff755.a3d4d8","wires":[]},{"id":"5cd2bf9c.adbe38","type":"set","name":"set user ","xml":"<set>\n<parameter name='chef-username' value='`$propertyName`'/>\n<parameter name='Password' value='`$password`'/>\n \n\n\n\n","comments":"","x":567.6443176269531,"y":854.2057800292969,"z":"68fff755.a3d4d8","wires":[]}]
