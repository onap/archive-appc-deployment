[{"id":"9ac68df1.3eeeb","type":"dgstart","name":"DGSTART","outputs":1,"x":238.4375,"y":257.86907958984375,"z":"75c5f17a.eda5d","wires":[["273c5344.72899c"]]},{"id":"273c5344.72899c","type":"service-logic","name":"APPC 2.0.0","module":"APPC","version":"2.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>","outputs":1,"x":422.4375,"y":257.86907958984375,"z":"75c5f17a.eda5d","wires":[["8dd8ca14.1d2288"]]},{"id":"8dd8ca14.1d2288","type":"method","name":"Restart_VNF","xml":"<method rpc='Restart_VNF' mode='sync'>\n","comments":"","outputs":1,"x":270.43756103515625,"y":339.86907958984375,"z":"75c5f17a.eda5d","wires":[["5d3382c5.b1f6ec"]]},{"id":"70aaf732.9e9648","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":834.4377136230469,"y":285.86907958984375,"z":"75c5f17a.eda5d","wires":[["9c8d5b92.af3218"]]},{"id":"d75599d9.2ac1c8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":836.4377136230469,"y":244.86907958984375,"z":"75c5f17a.eda5d","wires":[["9c8d5b92.af3218"]]},{"id":"e872f2e6.4460c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":835.4377136230469,"y":339.8690948486328,"z":"75c5f17a.eda5d","wires":[["9c8d5b92.af3218"]]},{"id":"5d3382c5.b1f6ec","type":"execute","name":"Set payload in Context","xml":"<execute plugin='org.openecomp.appc.dg.common.JsonDgUtil' method='flatAndAddToContext' >\n<parameter name=\"payload\" value=\"`$input.payload`\" />","comments":"","outputs":1,"x":515.4375915527344,"y":340.8691101074219,"z":"75c5f17a.eda5d","wires":[["70aaf732.9e9648","d75599d9.2ac1c8","e872f2e6.4460c","ada92d8a.b912f"]]},{"id":"ada92d8a.b912f","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":687.4375305175781,"y":410.8690948486328,"z":"75c5f17a.eda5d","wires":[["bbde3d59.c9e7d"]]},{"id":"bbde3d59.c9e7d","type":"execute","name":"Get Vnf Hierarchy","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='getVnfHierarchy'>\n<parameter name=\"resourceKey\" value=\"`$input.action-identifiers.vnf-id`\" />\n","comments":"","outputs":1,"x":605.1041259765625,"y":482.8691101074219,"z":"75c5f17a.eda5d","wires":[["fd4a217b.a9b57","7cc75d13.2aef74"]]},{"id":"7cc75d13.2aef74","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":930.1041564941406,"y":454.8691101074219,"z":"75c5f17a.eda5d","wires":[["b74a1f32.1d872"]]},{"id":"fd4a217b.a9b57","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":687.1041564941406,"y":554.8690490722656,"z":"75c5f17a.eda5d","wires":[["284ac8b0.ea6d28"]]},{"id":"284ac8b0.ea6d28","type":"switchNode","name":"switch_getVnfHierarchy_result","xml":"<switch test='`$getVnfHierarchy_result`'>\n","comments":"","outputs":1,"x":682.1041870117188,"y":617.9801940917969,"z":"75c5f17a.eda5d","wires":[["4ea4ea52.d70e44","53eb72ea.6a097c"]]},{"id":"4ea4ea52.d70e44","type":"outcome","name":"outcome_SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":720.1041870117188,"y":695.9802551269531,"z":"75c5f17a.eda5d","wires":[["9b95c3bd.6f8db"]]},{"id":"53eb72ea.6a097c","type":"outcome","name":"outcome_FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":999.1042175292969,"y":586.9801940917969,"z":"75c5f17a.eda5d","wires":[["24fa6be.3ab3c94"]]},{"id":"9b95c3bd.6f8db","type":"switchNode","name":"switch_VNF_VMCount","xml":"<switch test='`$VNF.VMCount`'>","comments":"","outputs":1,"x":721.1041870117188,"y":770.0912780761719,"z":"75c5f17a.eda5d","wires":[["279a19c4.a60a36","eb77493d.5744e8"]]},{"id":"279a19c4.a60a36","type":"outcome","name":"outcome_0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":953.1041564941406,"y":735.0912780761719,"z":"75c5f17a.eda5d","wires":[["6b2a2a0c.d9ce64"]]},{"id":"eb77493d.5744e8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":817.1041641235352,"y":831.0913391113281,"z":"75c5f17a.eda5d","wires":[["a4ecb63a.5c5838"]]},{"id":"a4ecb63a.5c5838","type":"execute","name":"Get VNFC Execution Flow Data","xml":"<execute plugin='org.openecomp.appc.dg.common.VnfExecutionFlow' method='getVnfExecutionFlowData' >\n<parameter name=\"DependencyType\" value='RESOURCE' />\n<parameter name=\"FlowStrategy\" value='FORWARD' />\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfVersion\" value='`$vnf.version`' />\n","comments":"","outputs":1,"x":765.1040420532227,"y":896.2024841308594,"z":"75c5f17a.eda5d","wires":[["892a65d2.ce83c8","d9875dc.74feda"]]},{"id":"892a65d2.ce83c8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":833.1041030883789,"y":954.2024230957031,"z":"75c5f17a.eda5d","wires":[["ae689d83.c6b01"]]},{"id":"d9875dc.74feda","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1008.1041030883789,"y":861.2023620605469,"z":"75c5f17a.eda5d","wires":[["ed720e24.72ff6"]]},{"id":"9c8d5b92.af3218","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1041.1044616699219,"y":282.8690872192383,"z":"75c5f17a.eda5d","wires":[["6da25f82.3ace7","8ebaa00a.5f127"]]},{"id":"8ebaa00a.5f127","type":"execute","name":"OutputMessageBuilde","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Failure in flattening payload Json\"/>","comments":"","outputs":1,"x":1300.009033203125,"y":236.25,"z":"75c5f17a.eda5d","wires":[["3e85e6ac.70e63a"]]},{"id":"3e85e6ac.70e63a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1541.2948379516602,"y":236.67862701416016,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"6da25f82.3ace7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name=\"output.status.message\" value=\"Failure in flattening payload Json\" />","comments":"","x":1271.4374084472656,"y":328.3927917480469,"z":"75c5f17a.eda5d","wires":[]},{"id":"b74a1f32.1d872","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1098.8819274902344,"y":454.75799560546875,"z":"75c5f17a.eda5d","wires":[["70eeb508.3e2e3c","a413144c.5a7408"]]},{"id":"a413144c.5a7408","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Failed to retrieve VNF details from A&amp;AI\"/>\n\n","comments":"","outputs":1,"x":1320.8818054199219,"y":420.75799560546875,"z":"75c5f17a.eda5d","wires":[["1b02a128.9f020f"]]},{"id":"70eeb508.3e2e3c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1289.8818054199219,"y":485.75799560546875,"z":"75c5f17a.eda5d","wires":[]},{"id":"1b02a128.9f020f","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1530.8818740844727,"y":420.7579803466797,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"24fa6be.3ab3c94","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1207.7709045410156,"y":577.9801788330078,"z":"75c5f17a.eda5d","wires":[["ed3ddf12.9c052","b53931d8.8a057"]]},{"id":"7f3210ce.eac0e","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1597.7707824707031,"y":545.9801864624023,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"ed3ddf12.9c052","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1430.7707824707031,"y":625.9801483154297,"z":"75c5f17a.eda5d","wires":[]},{"id":"6b2a2a0c.d9ce64","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1136.4375305175781,"y":736.0913391113281,"z":"75c5f17a.eda5d","wires":[["1824c2d.c22413d","dc0dbb4a.577668"]]},{"id":"dc0dbb4a.577668","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Server or VNFC not exists in A&amp;AI for the VNF\"/>\n\n","comments":"","outputs":1,"x":1414.4374160766602,"y":701.0913696289062,"z":"75c5f17a.eda5d","wires":[["7238540.2af54ac"]]},{"id":"7238540.2af54ac","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1620.4374084472656,"y":704.0913009643555,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"1824c2d.c22413d","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1392.4374160766602,"y":759.0914001464844,"z":"75c5f17a.eda5d","wires":[]},{"id":"ed720e24.72ff6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1176.4374771118164,"y":860.3135070800781,"z":"75c5f17a.eda5d","wires":[["dcc566b6.2ed2d8","1a34c826.e93e58"]]},{"id":"1a34c826.e93e58","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","outputs":1,"x":1439.4373779296875,"y":825.3134841918945,"z":"75c5f17a.eda5d","wires":[["1bb9b256.3c599e"]]},{"id":"1bb9b256.3c599e","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1665.4374084472656,"y":820.3134689331055,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"dcc566b6.2ed2d8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1411.4374084472656,"y":877.3135299682617,"z":"75c5f17a.eda5d","wires":[]},{"id":"62c490ca.74454","type":"for","name":"For each VNFC","xml":"<for index='vnfcCounter' start='0' end='`$vnfcFlowCount`' >\n","comments":"","outputs":1,"x":968.6598510742188,"y":1312.535400390625,"z":"75c5f17a.eda5d","wires":[["38f732d.673eece"]]},{"id":"a9fb203e.05197","type":"call","name":"call VNFC DG","xml":"<call module='`$Restart.dg_module`' rpc='`$Restart.dg_name`' mode='sync' version='`$Restart.dg_version`'>\n","comments":"","outputs":1,"x":1372.659683227539,"y":1363.646728515625,"z":"75c5f17a.eda5d","wires":[["9534aa2d.196af8","2398588.9d68ea8","5c723b91.ee2874"]]},{"id":"46f195f5.40ae1c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":752.6597900390625,"y":1312.5357666015625,"z":"75c5f17a.eda5d","wires":[["62c490ca.74454","202a8d89.1b7fe2","f88e788.8616a88","17128b11.be84d5"]]},{"id":"783f06ad.7c3438","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1650.6599731445312,"y":1059.5357360839844,"z":"75c5f17a.eda5d","wires":[["2100653b.73255a"]]},{"id":"f7c5a47.39a1f58","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1648.65966796875,"y":1144.5357360839844,"z":"75c5f17a.eda5d","wires":[["58ab2482.9113bc"]]},{"id":"58ab2482.9113bc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1838.65966796875,"y":1143.5357360839844,"z":"75c5f17a.eda5d","wires":[["9644598c.158738","b9e17e61.e8e82"]]},{"id":"b9e17e61.e8e82","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'Failed to retrieve VNFC DG for ' + $vnfcFlow[$i].vnfcType`\"/>\n","comments":"","outputs":1,"x":2066.65966796875,"y":1103.5357360839844,"z":"75c5f17a.eda5d","wires":[["440404e.5c865fc"]]},{"id":"440404e.5c865fc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2269.659912109375,"y":1103.5357360839844,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"9644598c.158738","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2035.65966796875,"y":1180.5357360839844,"z":"75c5f17a.eda5d","wires":[]},{"id":"5c723b91.ee2874","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1589.4374389648438,"y":1423.7578125,"z":"75c5f17a.eda5d","wires":[["c060c328.286b4"]]},{"id":"2398588.9d68ea8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1588.4374389648438,"y":1302.7578735351562,"z":"75c5f17a.eda5d","wires":[["4c8339c2.bc3ba8"]]},{"id":"9534aa2d.196af8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1590.4375610351562,"y":1360.7578125,"z":"75c5f17a.eda5d","wires":[["dec3e93f.1e0318"]]},{"id":"38f732d.673eece","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1157.3263549804688,"y":1208.7578430175781,"z":"75c5f17a.eda5d","wires":[["a9fb203e.05197","814ca941.4fa208","ddb8f914.46dbc8","a0732a1.d4944d8"]]},{"id":"ae689d83.c6b01","type":"switchNode","name":"switch_dependencyModelFound","xml":"<switch test='`$dependencyModelFound`'>\n","comments":"","outputs":1,"x":775.1040344238281,"y":1024.6469421386719,"z":"75c5f17a.eda5d","wires":[["b9c5cf99.51","19ad2d9a.c524d2"]]},{"id":"b9c5cf99.51","type":"outcome","name":"outcome_false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1068.770851135254,"y":965.7579650878906,"z":"75c5f17a.eda5d","wires":[["4fb101a5.38c5a"]]},{"id":"19ad2d9a.c524d2","type":"outcome","name":"outcome_true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":716.1041870117188,"y":1142.64697265625,"z":"75c5f17a.eda5d","wires":[["46f195f5.40ae1c"]]},{"id":"814ca941.4fa208","type":"execute","name":"execute_Resolve_VNFC_DG","xml":"<execute plugin='org.openecomp.appc.dg.common.DgResolverPlugin' method='resolveDg'>\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfcType\" value='`$vnfcFlow[$vnfcCounter].vnfcType`' />\n<parameter name=\"action\" value=\"Restart\" />\n<parameter name=\"prefix\" value=\"Restart\" />\n<parameter name=\"api-ver\" value='`$input.common-header.api-ver`' />\n<parameter name=\"DGResolutionType\" value=\"VNFC\" />","comments":"","outputs":1,"x":1418.4374389648438,"y":1105.6189880371094,"z":"75c5f17a.eda5d","wires":[["783f06ad.7c3438","f7c5a47.39a1f58"]]},{"id":"ddb8f914.46dbc8","type":"set","name":"set DG Parameters","xml":"<set>\n<parameter name='vnfcName' value='`$vnfcFlow[$vnfcCounter].vnfcName`' />\n<parameter name='vnfcType' value='`$vnfcFlow[$vnfcCounter].vnfcType`' />\n<parameter name='resilienceType' value='`$vnfcFlow[$vnfcCounter].resilienceType`' />\n<parameter name='vmCount' value='`$vnfcFlow[$vnfcCounter].vmCount`' />\n<parameter name='input.action' value='`$input.action`' />\n<parameter name='RestartSuccessVMCount' value='0' />\n<parameter name='AAIUpdateSuccessFlag' value='false' />","comments":"","x":1402.4647827148438,"y":1172.7023315429688,"z":"75c5f17a.eda5d","wires":[]},{"id":"a0732a1.d4944d8","type":"for","name":"For Each VM","xml":"<for index='j' start='0' end='`$vnfcFlow[$vnfcCounter].vmCount`' >\n","comments":"","outputs":1,"x":1387.2424926757812,"y":1240.6742553710938,"z":"75c5f17a.eda5d","wires":[["b2c4cf28.5e7a5"]]},{"id":"b2c4cf28.5e7a5","type":"set","name":"Set VM URL","xml":"<set>\n<parameter name=\"$vm[$j].url\" value='`$vnfcFlow[$vnfcCounter].vm[$j].url`' />","comments":"","x":1629.2425231933594,"y":1238.6742782592773,"z":"75c5f17a.eda5d","wires":[]},{"id":"4c8339c2.bc3ba8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1768.3264770507812,"y":1302.8689575195312,"z":"75c5f17a.eda5d","wires":[["8a8ff00d.9d0b3","eb3b629b.35cb"]]},{"id":"8a8ff00d.9d0b3","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1973.3266296386719,"y":1331.8689804077148,"z":"75c5f17a.eda5d","wires":[]},{"id":"a68d3770.e2f208","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2229.3267211914062,"y":1257.8689575195312,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"eb3b629b.35cb","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'VNFC DG not found for : ' + $vnfcName`\"/>","comments":"","outputs":1,"x":2011.3264770507812,"y":1257.8689575195312,"z":"75c5f17a.eda5d","wires":[["a68d3770.e2f208"]]},{"id":"dec3e93f.1e0318","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1756.3265991210938,"y":1359.8689575195312,"z":"75c5f17a.eda5d","wires":[["4848825e.eb8f0c"]]},{"id":"4848825e.eb8f0c","type":"switchNode","name":"switch_vm_restart_success","xml":"<switch test='`$RestartSuccessVMCount >= 1 and $AAIUpdateSuccessFlag == true`'>\n","comments":"","outputs":1,"x":1997.6597595214844,"y":1403.9799194335938,"z":"75c5f17a.eda5d","wires":[["67708009.ef876","a837107b.524fa"]]},{"id":"a837107b.524fa","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2189.4378662109375,"y":1348.9801025390625,"z":"75c5f17a.eda5d","wires":[["8d01a890.2fbeb8"]]},{"id":"67708009.ef876","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2194.9378051757812,"y":1458.9800415039062,"z":"75c5f17a.eda5d","wires":[["30ca3ed4.6640a2"]]},{"id":"8d01a890.2fbeb8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2359.4378051757812,"y":1348.9800415039062,"z":"75c5f17a.eda5d","wires":[["569739a0.423578","eaec519f.214dc","89bc175a.1df198","8cdac361.a8e5c"]]},{"id":"902f4f1d.36ed3","type":"set","name":"update failed VNFC count","xml":"<set>\n<parameter name=\"FailedVNFCCount\" value=\"`$FailedVNFCCount + 1`\" />\n","comments":"","x":2600.1043701171875,"y":1486.9801025390625,"z":"75c5f17a.eda5d","wires":[]},{"id":"569739a0.423578","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2577.992950439453,"y":1372.9800720214844,"z":"75c5f17a.eda5d","wires":[]},{"id":"30ca3ed4.6640a2","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2355.5486450195312,"y":1459.0912475585938,"z":"75c5f17a.eda5d","wires":[["902f4f1d.36ed3","d4c030eb.6cec9"]]},{"id":"f88e788.8616a88","type":"switchNode","name":"switch_vnfc_restart_success","xml":"<switch test='`$FailedVNFCCount == 0`'>\n","comments":"","outputs":1,"x":993.8818969726562,"y":1542.8690185546875,"z":"75c5f17a.eda5d","wires":[["df26bc01.d7fa1","2bcfdfc8.8bf36"]]},{"id":"df26bc01.d7fa1","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1229.8818969726562,"y":1497.8689575195312,"z":"75c5f17a.eda5d","wires":[["1a89739d.14981c"]]},{"id":"2bcfdfc8.8bf36","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1225.3820190429688,"y":1584.8689575195312,"z":"75c5f17a.eda5d","wires":[["471bece0.a1cdc4"]]},{"id":"1a89739d.14981c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1409.6318969726562,"y":1497.3412475585938,"z":"75c5f17a.eda5d","wires":[["f29375ef.e47478"]]},{"id":"f29375ef.e47478","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1619.1508178710938,"y":1498.3858032226562,"z":"75c5f17a.eda5d","wires":[]},{"id":"471bece0.a1cdc4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1415.6320190429688,"y":1584.3412475585938,"z":"75c5f17a.eda5d","wires":[["ae8ad841.b59cb8"]]},{"id":"ae8ad841.b59cb8","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n","comments":"","x":1616.3817749023438,"y":1583.7857055664062,"z":"75c5f17a.eda5d","wires":[]},{"id":"202a8d89.1b7fe2","type":"set","name":"set Failed VNFC Count","xml":"<set>\n<parameter name='FailedVNFCCount' value='0' />","comments":"","x":963.8819580078125,"y":1104.8689575195312,"z":"75c5f17a.eda5d","wires":[]},{"id":"c060c328.286b4","type":"record","name":"Log message","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Restart successfull for VNFC : ' + $vnfcName `\"/>\n","comments":"","outputs":1,"x":1766.2151489257812,"y":1422.869140625,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"eaec519f.214dc","type":"record","name":"Log message","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":2575.215591430664,"y":1211.869140625,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"d4c030eb.6cec9","type":"record","name":"Log message","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Failed to restart all VMs for VNFC : ' + $vnfcName + '. But successfully restarted '+ $RestartSuccessVMCount +' VM/s so continue to next VNFC'`\"/>\n","comments":"","outputs":1,"x":2563.2149963378906,"y":1434.8690795898438,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"2100653b.73255a","type":"record","name":"Log message","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'VNFC DG for ' + $vnfcName + ' resolves to rpc: ' + $Restart.dg_name + ', module: ' + $Restart.dg_module + ', version: ' + $Restart.dg_version `\"/>\n","comments":"","outputs":1,"x":1844.3265991210938,"y":1056.8691711425781,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"31d62dbc.3761f2","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\"/>","comments":"","outputs":1,"x":3125.1048736572266,"y":1339.758056640625,"z":"75c5f17a.eda5d","wires":[["1dd07e2b.67d132"]]},{"id":"1dd07e2b.67d132","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3345.1048736572266,"y":1322.758056640625,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"89bc175a.1df198","type":"switchNode","name":"switch_vm_restart_success","xml":"<switch test='`$RestartSuccessVMCount >= 1`'>\n","comments":"","outputs":1,"x":2569.881607055664,"y":1144.64697265625,"z":"75c5f17a.eda5d","wires":[["572b73b.db5c88c","14fb62d3.c79b1d"]]},{"id":"572b73b.db5c88c","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2801.160171508789,"y":1092.64697265625,"z":"75c5f17a.eda5d","wires":[["7c40c2f3.e0b87c"]]},{"id":"14fb62d3.c79b1d","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2778.6610260009766,"y":1189.6470947265625,"z":"75c5f17a.eda5d","wires":[["f8b19ae6.fe6ca8"]]},{"id":"7c40c2f3.e0b87c","type":"set","name":"Set event message","xml":"<set>\n<parameter name=\"event-message\" value=\"`'AAI update for VNFC ' + $vnfcName + '  failed. '`\" />","comments":"","x":3021.993179321289,"y":1079.6470947265625,"z":"75c5f17a.eda5d","wires":[]},{"id":"f8b19ae6.fe6ca8","type":"set","name":"Set event message","xml":"<set>\n<parameter name=\"event-message\" value=\"`'None of the VMs of VNFC ' + $vnfcName + ' are Restarted. Not proceeding to next VNFC'`\" />","comments":"","x":3001.9925689697266,"y":1168.091796875,"z":"75c5f17a.eda5d","wires":[]},{"id":"6568c60d.62fbd8","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":3152.837677001953,"y":427.8690643310547,"z":"75c5f17a.eda5d","wires":[["13d3844f.cd4abc"]]},{"id":"13d3844f.cd4abc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3444.123321533203,"y":445.2976837158203,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"b53931d8.8a057","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Failed to retrieve VNF details from A&amp;AI\"/>\n\n","comments":"","outputs":1,"x":1425.9708557128906,"y":544.8690643310547,"z":"75c5f17a.eda5d","wires":[["7f3210ce.eac0e"]]},{"id":"4fb101a5.38c5a","type":"call","name":"call Generic Restart without Model DG","xml":"<call module='APPC' rpc='Generic_Restart' version='2.0.1' mode='sync' >\n","comments":"","outputs":1,"x":1390.4375,"y":958.8690795898438,"z":"75c5f17a.eda5d","wires":[["a0f3b6b2.4c3988","cdb0db18.a743c8","618f6f6e.254cf"]]},{"id":"a0f3b6b2.4c3988","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1657.21533203125,"y":919.980224609375,"z":"75c5f17a.eda5d","wires":[["3a86e05a.69adc"]]},{"id":"cdb0db18.a743c8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1660.21533203125,"y":960.980224609375,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"618f6f6e.254cf","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1669.2153778076172,"y":1000.9801940917969,"z":"75c5f17a.eda5d","wires":[["bcfdc7ad.06d448"]]},{"id":"bcfdc7ad.06d448","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\n","comments":"","x":1903.21533203125,"y":999.980224609375,"z":"75c5f17a.eda5d","wires":[]},{"id":"3a86e05a.69adc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1848.65966796875,"y":897.980224609375,"z":"75c5f17a.eda5d","wires":[["857666e2.60b258","5400697c.4b3de8"]]},{"id":"5400697c.4b3de8","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Restart DG not found\"/>","comments":"","outputs":1,"x":2055.659912109375,"y":847.980224609375,"z":"75c5f17a.eda5d","wires":[["3e41a3d3.9fb8fc"]]},{"id":"857666e2.60b258","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2020.659912109375,"y":947.9802856445312,"z":"75c5f17a.eda5d","wires":[]},{"id":"3e41a3d3.9fb8fc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2330.4375,"y":793.8690795898438,"z":"75c5f17a.eda5d","wires":[["6568c60d.62fbd8"]]},{"id":"8cdac361.a8e5c","type":"switchNode","name":"switch last vnfc","xml":"<switch test='`$secondLastVnfcCounter == $vnfcCounter`'>\n","comments":"","outputs":1,"x":2607.037612915039,"y":1312.074951171875,"z":"75c5f17a.eda5d","wires":[["8f658fcd.5fbcc","7ffa8431.bbdbbc"]]},{"id":"17128b11.be84d5","type":"set","name":"set secondLastVnfcCounter","xml":"<set>\n<parameter name='secondLastVnfcCounter' value='`$vnfcFlowCount - 1`' />\n","comments":"","x":1003.4375,"y":1158.074951171875,"z":"75c5f17a.eda5d","wires":[]},{"id":"8f658fcd.5fbcc","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2772.8373943138176,"y":1258.0749688148517,"z":"75c5f17a.eda5d","wires":[[]]},{"id":"7ffa8431.bbdbbc","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2803.8373943138176,"y":1346.0749688148517,"z":"75c5f17a.eda5d","wires":[["31d62dbc.3761f2"]]}]
